<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Stm32f4-3dsound by cahya-wirawan</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>STM32F4-3DSound</h1>
        <p>3D sound effect on stm32f4</p>

        <p class="view"><a href="https://github.com/cahya-wirawan/stm32f4-3dsound">View the Project on GitHub <small>cahya-wirawan/stm32f4-3dsound</small></a></p>


        <ul>
          <li><a href="https://github.com/cahya-wirawan/stm32f4-3dsound/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://cahya-wirawan.github.io/stm32f4-3dsound/download/stm32f4-3dsound-0.1.bin.zip">Download <strong>Compiled Binary</strong></a></li>
          <li><a href="https://github.com/cahya-wirawan/stm32f4-3dsound">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a id="main-title" class="anchor" href="#main-title" aria-hidden="true"><span class="octicon octicon-link"></span></a>STM32F4-3DSound</h3>

<p>
  STM32F4-3DSound is an application that runs on a STM32F4-Discovery board for playing a waveform file with 
  3D sound effects. It reads a mono sound waveform file from a USB stick, and processes the sound samples in 
  real-time to produce a three-dimensional sound effect, then sends the output to stereo headphones. The 3D sound 
  effect is controlled by the spatial alignment of the board, which uses the MEMS motion sensor to determine its 
  position. If the board is turned to the left, the sound will come from the left side, and vice versa. Any angle
  in-between is of course handled as well. Currently only the horizontal angle (azimuth) is taken into account for 
  the 3D sound effect calculation, but the next version will also include the vertical angle (elevation).
</p>
<img src="pictures/stm32f4-01.jpg" alt="STM32F4-Discovery board" style="width:600px;height:400px">
<p>
  The application plays a waveform file from the root directory of a USB stick in a loop until the blue button 
  is pressed, which plays the next waveform file. Only a mono sound file with sample rate of 44100 Hz will be 
  accepted by the application, and headphones should be used to get the best result. Optionally, a serial 
  connection (USART with TX=pin PA2, 115200 baud, 8N1) can be used to monitor the application (error messages, 
  information about the waveform file to play, the angle position of the board, etc).
</p>
<p>
  The sound effect is achieved using a technology called Head Related Transfer Function (HRTF), which introduces
  true 3D sound spatialisation using headphones. Citation from Wikipedia: “A head-related transfer function (HRTF)
  is a response that characterises how an ear receives a sound from a point in space; a pair of HRTFs for two ears 
  can be used to synthesise a binaural sound that seems to come from a particular point in space. It is a transfer 
  function, describing how a sound from a specific point will arrive at the ear (generally at the outer end of the 
  auditory canal)”. The <a href="http://sound.media.mit.edu/resources/KEMAR.html">HRTF measurements</a> of a KEMAR dummy head microphone from MIT Media Lab has been used in 
  this application.
</p>
<p>
  3D sound spatialisation is a computationally expensive algorithm, but nevertheless, a small inexpensive 
  development board like STM32F4-Discovery with only 168 MHz cpu power and 192 KB RAM still has enough power to do 
  all this HRTF calculation in real-time.
</p>
<p>
  Oculus Rift recently announced at CES 2015 that they will support HRTF technology in their upcoming Oculus Audio 
  SDK. If you don’t have Oculus, but want to try out 3D sound spatialisation with HRTF, then just try this 
  application on your STM32F4-Discovery board, you will not be disappointed :)
</p>

<h3>Usage:</h3>
<pre><code>
  $ git clone git@github.com:cahya-wirawan/stm32f4-3dsound.git
  $ cd stm32f4-3dsound
  $ make
</code></pre>

<p>
  The binary (stm32f4-3dsound.bin, .hex, .elf) will be created in the build/ sub-directory.
  A <a href="https://cahya-wirawan.github.io/stm32f4-3dsound/download/stm32f4-3dsound-0.1.bin.zip">pre-compiled binary</a> can also be downloaded from this website.
</p>

  
</section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/cahya-wirawan">cahya-wirawan</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59648141-3', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
